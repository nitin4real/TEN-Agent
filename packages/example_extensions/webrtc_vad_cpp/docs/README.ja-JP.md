# WebRTC VAD C++ Extension

## 概要

TEN Framework用のC++で書かれたWebRTC VAD（音声アクティビティ検出）拡張。

## 特徴

- WebRTC VADアルゴリズムに基づくリアルタイム音声アクティビティ検出
- 複数のサンプルレートをサポート（8kHz、16kHz、32kHz、48kHz）
- 複数のフレーム長をサポート（10ms、20ms、30ms）
- 調整可能な検出感度（モード0-3）
- 低遅延、低リソース消費
- VAD結果を出力しながら元のオーディオフレームを転送

## VADモード

拡張は4つの感度モードをサポートしています：

- **モード0**: 品質優先 - 最も保守的、誤検出率が低いが、音声を見逃す可能性
- **モード1**: 低積極性 - バランスモード
- **モード2**: 中積極性 - デフォルトモード、ほとんどのシナリオに推奨
- **モード3**: 高積極性 - 最も積極的、検出率が高いが、誤検出が増える可能性

## 設定

`property.json`でVADモードを設定：

```json
{
  "mode": 2
}
```

## 入出力

### 入力

- **オーディオフレーム (audio_frame)**:
  - サンプルレート: 8000、16000、32000、または48000 Hz
  - ビット深度: 16ビット（サンプルあたり2バイト）
  - フレーム長: 10ms、20ms、または30ms
  - チャンネル: モノラルとマルチチャンネルをサポート（マルチチャンネルの場合は最初のチャンネルを使用）

### 出力

1. **VAD結果 (vad_result)**:
   - `is_speech` (bool): trueは音声検出、falseは無音/ノイズ
   - `frame_name` (string): 元のオーディオフレーム名
   - `timestamp` (int64): タイムスタンプ

2. **オーディオフレーム (audio_frame)**: ダウンストリーム処理用に元のオーディオフレームを転送

## 使用例

TENアプリケーションのグラフ設定でこの拡張を使用：

```json
{
  "nodes": [
    {
      "type": "extension",
      "name": "webrtc_vad",
      "addon": "webrtc_vad_cpp",
      "property": {
        "mode": 2
      }
    }
  ]
}
```

## クイックスタート

### 前提条件

- TEN Framework 0.11.30以上
- C++11以上をサポートするC++コンパイラ

### インストール

TEN Frameworkパッケージインストールガイドに従ってください。

## ライセンス

このパッケージはTEN Frameworkプロジェクトの一部であり、Apache License 2.0に従います。
