#!/bin/bash

set -e

cd "$(dirname "${BASH_SOURCE[0]}")/.."

# Find libpython.so using find_libpython.py and set TEN_PYTHON_LIB_PATH
if [ -x "ten_packages/system/ten_runtime_python/tools/find_libpython.py" ]; then
  LIBPYTHON_PATH=$(python3 ten_packages/system/ten_runtime_python/tools/find_libpython.py)
  if [ -n "$LIBPYTHON_PATH" ]; then
    export TEN_PYTHON_LIB_PATH="$LIBPYTHON_PATH"
  fi
fi

export PYTHONPATH=$(pwd):$(pwd)/ten_packages/system/ten_ai_base/interface
export NODE_PATH=$(pwd)/ten_packages/system/ten_runtime_nodejs/lib:$NODE_PATH

exec bin/main
